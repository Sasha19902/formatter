public class Main {
	public static void main(String[] args) throws IOException {
		Scanner scanner = new Scanner(System.in);
		try(DefaultReader reader = new DefaultReader(scanner.nextLine());
		DefaultWriter defaultWriter = new DefaultWriter(scanner.nextLine())) {
			Lexer lexer = new LexerFabric().generateLexer(reader);
			Formatter formatter = new FormatterFabric().getFormatter();
			try {
				formatter.format(lexer, defaultWriter);
				}
			catch (FormatterException e) {
				e.printStackTrace();
				}
			}
		catch (DefaultIOException e) {
			e.printStackTrace();
			}
		}
	}
